{"version":3,"sources":["explodeBlock.es6"],"names":["factory","define","amd","exports","module","require","jQuery","$","fn","explodeBlock","options","window_height","extend","scrollTop","trigger","window","on","outerHeight","this","each","create_alt_blocks_layer","$element_blocks","append","css","position","background-image","$this","data","background-size","background-position","background-repeat","overflow","$element_blocks_alt_layer","find","set_blocks_init_position","TweenLite","set","x","y","scale","autoAlpha","create_exlode_timeline","explode_tl","pause","add","to","update_alt_blocks_layer","element_width","outerWidth","element_height","width","height","top","left","animation_length","animation_trigger_start","animation_trigger_end","TimelineMax","e","type","offset","progress"],"mappings":"cAQE,SAAUA,GAEc,kBAAXC,SAAyBA,OAAOC,IACvCD,QAAQ,UAAWD,GACO,mBAAZG,SACdC,OAAOD,QAAUH,EAAQK,QAAQ,WAEjCL,EAAQM,SAKf,SAAUC,GAEPA,EAAEC,GAAGC,aAAe,SAAUC,GAE1B,GAEIC,IAFmBJ,EAAEK,UAAWF,OAEhCC,IACAE,MAAAA,GACAC,MAAAA,EAEJP,GAAEQ,QAAQC,GAAG,gBAAiB,WAC1BL,EAAgBJ,EAAEQ,QAAQE,cAC1BJ,EAAYN,EAAEQ,QAAQF,YAEtBC,EAAUD,EAAYF,IAK1BJ,EAAEW,MAAMC,KAAK,WAwBT,QAASC,KACLC,EAAgBF,KAAK,WAEjBZ,EAAEW,MAAMI,OAAOf,EAAE,eAAegB,KAC5BC,SAAY,WACZC,mBAAoB,OAASC,EAAMC,KAAK,wBAA0B,IAClEC,kBAAmB,QACnBC,sBAAuB,SACvBC,oBAAqB,eAKzBvB,EAAEW,MAAMK,KACJQ,SAAY,aAIpBC,EAA4BX,EAAgBY,KAAK,OAIrD,QAASC,KACLC,UAAUC,IAAI,YAAaC,GAAI,GAAIC,GAAI,KACvCH,UAAUC,IAAI,YAAaC,EAAG,GAAIC,GAAI,GAAIC,MAAO,KACjDJ,UAAUC,IAAI,YAAaC,GAAI,GAAIC,EAAG,GAAIC,MAAO,MACjDJ,UAAUC,IAAI,YAAaC,EAAG,GAAIC,EAAG,KACrCH,UAAUC,IAAIJ,GAA4BQ,UAAW,IAIzD,QAASC,KAELC,EAAWC,QAEXD,EAAWE,IAAI,WACVC,GAAG,WAAY,GAAIR,EAAG,EAAGC,EAAG,EAAGC,MAAO,GAAI,WAC1CM,GAAG,WAAY,GAAIR,EAAG,EAAGC,EAAG,EAAGC,MAAO,GAAI,WAC1CM,GAAG,WAAY,GAAIR,EAAG,EAAGC,EAAG,EAAGC,MAAO,GAAI,WAC1CM,GAAG,WAAY,GAAIR,EAAG,EAAGC,EAAG,EAAGC,MAAO,GAAI,WAC1CM,GAAGb,EAA2B,GAAIQ,UAAW,GAAI,WAK1D,QAASM,KACLC,EAAgBrB,EAAMsB,aACtBC,EAAiBvB,EAAMT,cAGvBe,EAA0BT,KACtB2B,MAASH,EAAgB,KACzBI,OAAUF,EAAiB,OAG/B5B,EAAgBF,KAAK,WAEjBZ,EAAEW,MAAMe,KAAK,OAAOV,KAChB6B,KAAQ7C,EAAEW,MAAMM,WAAW4B,IAAM,KACjCC,MAAS9C,EAAEW,MAAMM,WAAW6B,KAAO,SAjF/C,GAAI3B,GAAQnB,EAAEW,MACVoC,EAAmB,EACnBC,MAAAA,GACAC,MAAAA,GACAP,MAAAA,GACAF,MAAAA,GACA1B,EAAkBK,EAAMO,KAAK,UAC7BD,MAAAA,GACAU,EAAa,GAAIe,cAMrB,WACIrC,IACA0B,IACAZ,IACAO,OAsEJlC,EAAEQ,QAAQC,GAAG,gBAAiB,SAAU0C,GAYpC,GAVc,UAAVA,EAAEC,MACFb,IAIJS,EAA0B7B,EAAMkC,SAASR,IACzCI,EAAwBD,EAA0B5C,EAAgBsC,EAElEK,EAAmBE,EAAwBD,EAEvCzC,EAAUyC,GAA2BzC,EAAU0C,EAAuB,CAEtE,GAAIK,IAAY/C,EAAUyC,GAA2BD,CAEjDO,GAAW,GAEX1B,UAAUU,GAAGH,EAAY,GAAImB,SAAU,IAGlCA,EAAW,IAAOA,EAAW,GAElC1B,UAAUU,GAAGH,EAAY,GAAImB,SAAU,IAIlCA,EAAW,IAEhB1B,UAAUU,GAAGH,EAAY,GAAImB,SAAU","file":"explodeBlock.min.js","sourcesContent":["/*\n\n explodeBlock\n\n Author: lemehovskiy\n\n */\n\n;(function (factory) {\n    'use strict';\n    if (typeof define === 'function' && define.amd) {\n        define(['jquery'], factory);\n    } else if (typeof exports !== 'undefined') {\n        module.exports = factory(require('jquery'));\n    } else {\n        factory(jQuery);\n    }\n\n}\n\n(function ($) {\n\n    $.fn.explodeBlock = function (options) {\n\n        let general_settings = $.extend({}, options);\n\n        let window_height,\n            scrollTop,\n            trigger;\n\n        $(window).on('scroll resize', function () {\n            window_height = $(window).outerHeight();\n            scrollTop = $(window).scrollTop();\n\n            trigger = scrollTop + window_height;\n\n        });\n\n\n        $(this).each(function () {\n\n            let $this = $(this),\n                animation_length = 0,\n                animation_trigger_start,\n                animation_trigger_end,\n                element_height,\n                element_width,\n                $element_blocks = $this.find('.block'),\n                $element_blocks_alt_layer,\n                explode_tl = new TimelineMax();\n\n\n            init();\n\n\n            function init() {\n                create_alt_blocks_layer();\n                update_alt_blocks_layer();\n                set_blocks_init_position();\n                create_exlode_timeline();\n            }\n\n\n            function create_alt_blocks_layer() {\n                $element_blocks.each(function () {\n\n                    $(this).append($('<div></div>').css({\n                        'position': 'absolute',\n                        'background-image': 'url(' + $this.data('exlode-block-alt-img') + ')',\n                        'background-size': 'cover',\n                        'background-position': 'center',\n                        'background-repeat': 'no-repeat'\n                        // 'top': -$(this).position().top + 'px',\n                        // 'left': -$(this).position().left + 'px',\n                    }));\n\n                    $(this).css({\n                        'overflow': 'hidden'\n                    })\n                });\n\n                $element_blocks_alt_layer = $element_blocks.find('div');\n            }\n\n\n            function set_blocks_init_position() {\n                TweenLite.set('.block-1', {x: -50, y: -50});\n                TweenLite.set('.block-2', {x: 50, y: -20, scale: 0.8});\n                TweenLite.set('.block-3', {x: -30, y: 20, scale: 0.86});\n                TweenLite.set('.block-4', {x: 40, y: 20});\n                TweenLite.set($element_blocks_alt_layer, {autoAlpha: 0})\n            }\n\n\n            function create_exlode_timeline() {\n\n                explode_tl.pause();\n\n                explode_tl.add('move-in')\n                    .to('.block-1', 1, {x: 0, y: 0, scale: 1}, 'move-in')\n                    .to('.block-2', 1, {x: 0, y: 0, scale: 1}, 'move-in')\n                    .to('.block-3', 1, {x: 0, y: 0, scale: 1}, 'move-in')\n                    .to('.block-4', 1, {x: 0, y: 0, scale: 1}, 'move-in')\n                    .to($element_blocks_alt_layer, 1, {autoAlpha: 1}, 'move-in')\n\n            }\n\n\n            function update_alt_blocks_layer() {\n                element_width = $this.outerWidth();\n                element_height = $this.outerHeight();\n\n\n                $element_blocks_alt_layer.css({\n                    'width': element_width + 'px',\n                    'height': element_height + 'px'\n                })\n\n                $element_blocks.each(function () {\n\n                    $(this).find('div').css({\n                        'top': -$(this).position().top + 'px',\n                        'left': -$(this).position().left + 'px',\n                    });\n\n                });\n            }\n\n\n            $(window).on('scroll resize', function (e) {\n\n                if (e.type == 'resize') {\n                    update_alt_blocks_layer();\n                }\n\n\n                animation_trigger_start = $this.offset().top;\n                animation_trigger_end = animation_trigger_start + window_height + element_height;\n\n                animation_length = animation_trigger_end - animation_trigger_start;\n\n                if (trigger > animation_trigger_start && trigger < animation_trigger_end) {\n\n                    let progress = (trigger - animation_trigger_start) / animation_length;\n\n                    if (progress < 0.2) {\n\n                        TweenLite.to(explode_tl, 1, {progress: 0});\n                    }\n\n                    else if (progress > 0.2 && progress < 0.8) {\n\n                        TweenLite.to(explode_tl, 1, {progress: 1});\n\n                    }\n\n                    else if (progress > 0.8) {\n\n                        TweenLite.to(explode_tl, 1, {progress: 0});\n\n                    }\n                }\n            })\n        });\n    }\n}));"]}